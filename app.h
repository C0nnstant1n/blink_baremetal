#ifndef APP_BLINK_H
#define APP_BLINK_H

#include <stdint.h>
#include "sl_sleeptimer.h"
#include "blink.h"
#include "button.h"

// Конфигурация таймера (можно переопределить извне)
#ifndef TOOGLE_DELAY_MS
#define TOOGLE_DELAY_MS 10 // Период срабатывания таймера в мс
#endif

/**
 * @brief Инициализация приложения.
 *
 * Создаёт периодический таймер для пробуждения системы и настройки
 * периодического выполнения действий.
 *
 * @note Должна быть вызвана один раз при старте приложения.
 */
void app_init(void);

/**
 * @brief Основная функция обработки действий приложения.
 *
 * Вызывается регулярно для выполнения текущих задач приложения
 * (в данном случае — управление миганием).
 *
 * @note Предполагается, что вызывается из основного цикла программы.
 */
void app_process_action(void);

/**
 * @brief Получает текущее значение счётчика срабатываний таймера.
 *
 * Безопасный способ чтения значения timer_count из других модулей.
 * Функция является статической в исходном файле, но её прототип
 * включён в заголовок для документирования и использования в других единицах трансляции.
 *
 * @return Текущее значение счётчика timer_count.
 *
 * @note Поскольку timer_count — volatile-переменная, чтение через функцию
 *       гарантирует корректное получение актуального значения.
 */
uint8_t get_timer_count(void);

/**
 * @brief Обработчик таймера (callback при истечении времени).
 *
 * Увеличивает счётчик срабатываний таймера на единицу.
 *
 * @param[in] handle  Указатель на дескриптор таймера.
 * @param[in] data    Пользовательские данные (не используются).
 *
 * @note Функция объявлена как static в исходном файле, но для полноты
 *       документации включена в заголовок. В пользовательском коде
 *       напрямую вызывать не требуется.
 */
// static void on_timeout(sl_sleeptimer_timer_handle_t *handle, void *data);

#endif // APP_BLINK_H
